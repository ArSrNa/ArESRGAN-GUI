!function(){"use strict";var i;function r(e){if(e.events){for(var t=i(document.createElement("i")).html(e.html),n=0;n<e.events.length;n++){var a=e.events[n],r=i(t).find("[json2html-event-id-"+a.type+"='"+a.id+"']");if(0===r.length)throw"jquery.json2html was unable to attach event "+a.id+" to DOM";i(r).removeAttr("json2html-event-id-"+a.type),i(r).on(a.type,a.data,function(e){(e.data.event=e).data.action.call(i(this),e.data)})}return i(t).children()}}function w(e,t){var n={html:"",event:[]};return void 0!==e&&void 0!==t&&(n.html=e.html+t.html,n.events=e.events.concat(t.events)),n}function k(e){return"[object Array]"===Object.prototype.toString.call(e)}function x(e,t,n,a){var r,i={events:[],html:""};if(k(t))for(var s=t.length,o=0;o<s;++o)i=w(i,x(e,t[o],n,a));else if("object"==typeof t){var c="<>";if(void 0===t[c]&&(c="tag"),void 0!==t[c]){var l=D(e,t,c,n,a),f=function(e){switch(e){case"area":case"base":case"br":case"col":case"command":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":return!0;default:return!1}}(l);i.html+="<"+l;var u,d={events:[],html:""};for(var h in t)switch(h){case"tag":case"<>":break;case"text":if(f)continue;k(v=t[h])||(u=json2html.toText(D(e,t,h,n,a)));break;case"children":case"html":if(f)continue;var v;if(k(v=t[h]))d=w(d,x(e,v,n,a));else if("function"==typeof v){var m=v.call(e,e,n,a.data);if(!k(m))switch(typeof m){case"object":void 0!==m.html&&void 0!==m.events&&(d=w(d,m));break;case"function":case"undefined":break;default:d.html+=m}}else u=D(e,t,h,n,a);break;default:var p=!1;if(2<h.length&&"on"==h.substring(0,2).toLowerCase()){if(a.events){var g={action:t[h],obj:e,data:a.data,index:n},b=(r=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)})()+r()+"-"+r()+r()+"-"+r()+r();i.events[i.events.length]={id:b,type:h.substring(2),data:g},i.html+=" json2html-event-id-"+h.substring(2)+"='"+b+"'"}p=!0}if(!p){var j,y=D(e,t,h,n,a);if(void 0!==y)j="string"==typeof y?'"'+y.replace(/"/g,"&quot;")+'"':y,i.html+=" "+h+"="+j}}f?i.html+="/>":(i.html+=">",u&&(i.html+=u),(i=w(i,d)).html+="</"+l+">")}}return i}function D(o,e,t,c,n){var a="",r=e[t];switch(typeof r){case"function":switch(typeof o){case"object":return r.call(o,o,c,n.data);case"function":case"undefined":return"";default:var i={value:o,index:c,data:n.data};return r.call(i,i,c,n.data)}break;case"string":a=new s([/\$\{([^\}\{]+)\}/],function(e,t,n){return t?e.replace(n,function(e,t){var n=t.split("."),a=o;switch(typeof o){case"object":for(var r="",i=n.length,s=0;s<i;++s){if(0<n[s].length)if(null==(a=a[n[s]]))break}return null!=a&&(r=a),r;case"function":case"undefined":return"";default:switch(t){case"value":return o;case"index":return c}}}):e}).parse(r).join("");break;default:a=r}return a}function s(e,t){if(!(this instanceof s))return new s(e,t);this.tokenizers=e.splice?e:[e],t&&(this.doBuild=t),this.parse=function(e){for(this.src=e,this.ended=!1,this.tokens=[];this.next(),!this.ended;);return this.tokens},this.build=function(e,t){e&&this.tokens.push(this.doBuild?this.doBuild(e,t,this.tkn):e)},this.next=function(){var e,t=this;t.findMin(),e=t.src.slice(0,t.min),t.build(e,!1),t.src=t.src.slice(t.min).replace(t.tkn,function(e){return t.build(e,!0),""}),t.src||(t.ended=!0)},this.findMin=function(){var e,t,n=this,a=0;for(n.min=-1,n.tkn="";void 0!==(e=n.tokenizers[a++]);)-1!=(t=n.src[e.test?"search":"indexOf"](e))&&(-1==n.min||t<n.min)&&(n.tkn=e,n.min=t);-1==n.min&&(n.min=n.src.length)}}("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{}).json2html={version:"1.4.0",transform:function(e,t,n){var a={events:[],html:""},r={events:!1};r=function(e,t){var n={};for(var a in e)n[a]=e[a];for(var a in t)n[a]=t[a];return n}(r,n),void 0===t&&void 0===e||(a=function(e,t,n){var a={events:[],html:""};if(k(e))for(var r=e.length,i=0;i<r;++i)a=w(a,x(e[i],t,i,n));else switch(typeof e){case"undefined":case"function":default:a=w(a,x(e,t,void 0,n))}return a}("string"==typeof e?JSON.parse(e):e,t,r));return r.events?a:a.html},toText:function(e){return null==e?"":e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/\//g,"&#x2F;")}},"object"==typeof window&&window.jQuery&&((i=window.jQuery).json2html=function(e,t,n){if("undefined"!=typeof json2html){var a={output:"json2html"};switch(void 0!==n&&i.extend(a,n),a.eventData&&(a.data=a.eventData,delete a.eventData),a.output){case"json2html":return a.events=!0,json2html.transform(e,t,a);case"html":return a.events=!1,json2html.transform(e,t,a);case"jquery":return a.events=!1,r(json2html.transform(e,t,a))}}},i.fn.json2html=function(t,n,e){if("undefined"!=typeof json2html){var a={append:!0,replace:!1,prepend:!1};return void 0!==e&&i.extend(a,e),a.eventData&&(a.data=a.eventData,delete a.eventData),a.events=!0,this.each(function(){var e=r(json2html.transform(t,n,a));a.replace?i.fn.replaceWith.call(i(this),e):a.prepend?i.fn.prepend.call(i(this),e):i.fn.append.call(i(this),e)})}})}();